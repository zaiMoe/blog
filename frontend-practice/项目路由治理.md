# 中后台系统路由表的最佳实践

> 整理下在一个项目中，一个路由表的最佳实践

![](./imgs/admin-sys.png)

> <https://iczer.gitee.io/vue-antd-admin/#/dashboard/workplace>

一个中后台系统的 UI 如上图类似，会分为

```text
一级菜单1
    页面 1-1
一级菜单2
    二级菜单2-1
        页面 2-1-1
        页面 2-1-2
    页面 2-2
    // 可以嵌套更多级的菜单11
    
```

通常情况下，会分开设计两个结构来分别维护，比如针对菜单和面包屑

```tsx
const menusConfig = [
    {
        title: "一级菜单1",
        children: [
            {
                title: "页面 1-1",
                path: "/menu1/page1-1"
            }
        ]
    },
    {
        title: "一级菜单2",
        children: [
            {
                title: "二级菜单2-1",
                children: [
                    {
                        title: "页面 2-1-1",
                        path: "/menu2/page2-1-1"
                    },
                    {
                        title: "页面 2-1-2",
                        path: "/menu2/page2-1-2"
                    }
                ]
            },
            {
                title: "页面 2-2",
                path: "/menu2/page2-2"
            }
        ]
    }
]
```

另外单独维护一个路由表 `routeConfig`

```tsx
const routeConfig = [
    {
        path: "/menu1/page1-1"
        component: "xx",
        children: [/* detail 等子路由，不显示在菜单中 */]
    },
    {
        path: "/menu2/page2-1-1",
        component: "xx",
    },
    {
        path: "/menu2/page2-1-2",
        component: "xx",
    },
    {
        path: "/menu2/page2-2"
        component: "xx",
    }
]
```

仔细观察发现这种路由表与菜单的结构是非常相似的，所以可以尝试维护一个新的数据结构，来减少项目开发中配置的成本（不用维护两份）。

## 菜单与路由表结合

两者结合比较简单，方式也很多，例如像下面这样简单合并，有其他配配置也方便扩展，如 `icon` 等

```tsx

interface MenuItem {
    title: string;
    path?: string;
    component?: any;
    hidden?: boolean; // 不希望显示在菜单树中
    children: MenuItem[];
}

const config: MenuItem[] = [
    {
        title: "一级菜单1",
        children: [
            {
                title: "页面 1-1",
                path: "/menu1/page1-1",
                component: "xx",
                children: [
                    title: "页面 1-1 detail",
                    path: "/menu1/page1-1/detail",
                    component: "xx",
                    hidden: true
                ]
            }
        ]
    },
    {
        title: "一级菜单2",
        children: [
            {
                title: "二级菜单2-1",
                children: [
                    {
                        title: "页面 2-1-1",
                        path: "/menu2/page2-1-1",
                        component: "xx",
                    },
                    {
                        title: "页面 2-1-2",
                        path: "/menu2/page2-1-2",
                        component: "xx",
                    }
                ]
            },
            {
                title: "页面 2-2",
                path: "/menu2/page2-2",
                component: "xx",
            }
        ]
    }
]

```

然后由上面的树分别生成对应的 `menusConfig` 和 `routeConfig`

## 针对使用场景的改进

1. 作为子页面，子路由的场景，比如 edit、detail 等页面
2. 作为子路由，但不是子页面，比如跳转到一些特定到独立页面
3. 不作为子页面、子路由而存在的独立页面，但不显示在菜单中

4. ~~路由与菜单结合~~
5. 路由的场景: 嵌套、非嵌套、对应的页面场景
6. 路由结构体下，path 是否父子关系
7. 与权限结合
8. 配置化，支持重定向的配置
