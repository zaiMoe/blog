# 基本概念

### 帮助命令

```powershell
man command # 第一行的数字(1)代表内容的类型，ctrl+d=page_down=下页，q退出，方向键移动
```

### 系统命令

```powershell
su - # 切换为 root
shutdown # 关机，可以设定关机时间，以及发送关机通知
reboot # 重启
poweroff # 关机
systemctl # todo
```

### 文件系统

linux 的角色可以分为：

- 拥有者：比如学生A，拥有一台 switch，就能独自看、玩
- 群组：所属的群组，所拥有的权限，比如 学生A 加入 xx社团 成为 社员A，并将 switch 放在社团给所有社员一起玩，这样社员B就可以使用这台 switch 了

- 第三方用户：非上面的情况
- root：不受上面约束，有全部权限，即为“上帝”

#### 文件属性和权限

![img](./概念.img/img1.png)

##### 文件属性

- 索引节点Inode：
- 文件类型（橙色框第一个符号）："-"～文件，"d"～目录，"l"～链接
- 权限（橙色框后面9个符号，3个一组）：
- 引用数：

时间说明：

- mtime(modification time): 最后一次修改时间
- ctime(change time): 属性/权限变化时间
- atime(access time): 访问时间

查看时间：`stat dir` (mac: `stat -x dir`)

| 命令           | atime | mtime | ctime |
|----------------|-------|-------|-------|
| vim、vi(修改)   | Y     | Y     | Y     |
| vim、vi(不修改) | Y     | N     | N     |
| touch          | Y     | Y     | Y     |
| mv             | N     | N     | Y     |
| cp             | Y     | N     | N     |
| chown          | N     | N     | Y     |
| chmod          | N     | N     | Y     |
| >、>>           | Y     | Y     | Y     |
| ./test.sh      | Y     | N     | N     |

> 注：修改文件后三个时间都会改变

与文件属性有关的命令

```bash
umask -S # 查看文件权限， 022=755， 也可以用ls看
chattr # 设置文件的隐藏属性
lsattr -adR # 显示文件的隐藏属性
```

##### 文件权限

```bash
chgrp newGroup filename # 修改组
chown newOwn filename # 修改 拥有者
chomd [rwx] filename # 修改权限，覆盖之前的 3组 设置
chomd a[+/-]w fielname # a: all, 给全部 加/减 写权限， a还有[ugo]其他选项 
```

对于文件：

- 文件是存放实际数据的所在
- r: 读取文件名对应的数据
- w: 修改/新增数据内容
- x: 执行、删除

对于文件夹：目录是存储文件名的清单

- r: 读取清单的权限，可以用 `ls` 查看
- w:  创建新文件和目录、删除/更名已存在文件（忽略文件权限），移动
- x: 是否可以进入改目录

![img](./概念.img/img2.png)

###### 特殊权限: SUID, SGID, SBIT

- SUID: set UID rw**s** 用于二进制，尽在执行中有效(run-time)，并且拥有 owner 权限
- SGID: rw**s** 执行过程会有 群组 的支持
- SBIT:

#### 目录树说明

下面的图片是 mac 的
![img](./概念.img/img3.png)

### 文件与目录管理

`$PATH` 环境变量，以 `:` 隔开

#### 目录相关

```bash
cd dir
pwd [-P] # P显示出真实路径而非link
mkdir
rmdir
```

#### 文件的CRUD

```bash
ls -aAdhil dir # a显示隐藏目录，A不现实.|..，d仅列出来目录，h格式化size，i是inode 
cp -adls dir # d复制链接而不是源文件，a=dr，l以硬连接的方式复制，s以软连接的方式复制
rm -rid dir 
mv -u src dest # 可以用来改名 u目的存在时只有比源文件新才移动
basename # 获取文件名
dirname # 获取路径
touch -acdm # 创建或者修改文件熟悉，a仅修改时atime，c修改文件时间，d需要修改的时间，m修改mtime
```

##### 查阅

```bash
cat -bvnTA dir # b列出行号（不包含空白）,v列出不可见字符，n行号，T^I来显示tab，A=vT
tac # 与 cat 相反
nl -b[at]nw # b-a类似cat -n，b-t=cat-b，n行号位置，-w序号的占用字符数
more/less # man的阅读调用的less 空格下页，支持pgu/pgd，b上页，nN查询
head -n[number] file # 查看前n行，n支持负数
tail -nf file # 查看后n行，支持负数，f持续追踪，除非终止（ctrl+C）
od -t[ac dfox[size]] # 以二进制的方式查看，a默认字符查看，c是ASCII，d十进制显示，f浮点数，o8，x16，size是每个整数占用多少位
```

###### 例子1-查看某个单词的 ASCII 码

```bash
echo "password" | od -t cx
```

#### 文件查找

```bash
which -a command # 在PATH变量指定的路径中搜索指定的系统命令的位置
whereis [-bmsu] filename # -b二进制命令，-m说明文件，s源代码文件
locate # 利用数据库查找，类似windows的ererything，mac的索引
find
grep
```
